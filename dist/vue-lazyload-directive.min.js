!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.vueLazyloadDirective=e()}(this,function(){"use strict";function t(t,e,i){function o(e){var n=y,i=h;return y=h=void 0,E=e,g=t.apply(i,n)}function l(t){return E=t,x=setTimeout(s,e),I?o(t):g}function u(t){var n=t-T,i=t-E,o=e-n;return O?w(o,v-i):o}function c(t){var n=t-T,i=t-E;return void 0===T||n>=e||n<0||O&&i>=v}function s(){var t=j();return c(t)?f(t):void(x=setTimeout(s,u(t)))}function f(t){return x=void 0,k&&y?o(t):(y=h=void 0,g)}function d(){void 0!==x&&clearTimeout(x),E=0,y=T=h=x=void 0}function m(){return void 0===x?g:f(j())}function p(){var t=j(),n=c(t);if(y=arguments,h=this,T=t,n){if(void 0===x)return l(T);if(O)return x=setTimeout(s,e),o(T)}return void 0===x&&(x=setTimeout(s,e)),g}var y,h,v,g,x,T,E=0,I=!1,O=!1,k=!0;if("function"!=typeof t)throw new TypeError(a);return e=r(e)||0,n(i)&&(I=!!i.leading,O="maxWait"in i,v=O?b(r(i.maxWait)||0,e):v,k="trailing"in i?!!i.trailing:k),p.cancel=d,p.flush=m,p}function e(e,i,o){var r=!0,l=!0;if("function"!=typeof e)throw new TypeError(a);return n(o)&&(r="leading"in o?!!o.leading:r,l="trailing"in o?!!o.trailing:l),t(e,i,{leading:r,maxWait:i,trailing:l})}function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function i(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||i(t)&&g.call(t)==u}function r(t){if("number"==typeof t)return t;if(o(t))return l;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(c,"");var i=f.test(t);return i||d.test(t)?m(t.slice(2),i?2:8):s.test(t)?l:+t}var a="Expected a function",l=NaN,u="[object Symbol]",c=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,d=/^0o[0-7]+$/i,m=parseInt,p="object"==typeof global&&global&&global.Object===Object&&global,y="object"==typeof self&&self&&self.Object===Object&&self,h=p||y||Function("return this")(),v=Object.prototype,g=v.toString,b=Math.max,w=Math.min,j=function(){return h.Date.now()},x=function(){this.elms={},this.loading=null,this.failed=null,this.throttleFn=null,this.transitionTime=400,this.listener()};x.prototype.listener=function(){document.addEventListener("scroll",this.handler.bind(this),!0)},x.prototype.handler=function(){!this.throttleFn&&(this.throttleFn=e(this.scroll,300)),this.throttleFn()},x.prototype.add=function(t){this.elms[t.key]=t},x.prototype.remove=function(t){delete this.elms[t]},x.prototype.scroll=function(){for(var t=this,e=Object.keys(this.elms),n=0,i=e;n<i.length;n+=1){var o=i[n];t.elms[o].dataset.success||t.isElementInViewport(t.elms[o])&&t.elms[o].execute()}},x.prototype.isElementInViewport=function(t){var e=t.getBoundingClientRect(),n=e.top,i=e.left,o=e.bottom,r=e.right,a=e.height,l=e.width;return n+a>=0&&i+l>=0&&o-a<=(window.innerHeight||document.documentElement.clientHeight)&&r-l<=(window.innerWidth||document.documentElement.clientWidth)};var T=new x,E=function(t,e){t.execute=function(){if(!t.dataset.success){var n=new Image;n.src=e,n.onload=n.onerror=function(n){var i=n.type;t.style.opacity=.2,setTimeout(function(){var n="error"===i?T.failed:e;n&&(t.style.backgroundImage='url("'+n+'")'),t.dataset.success=1,t.style.opacity=1},T.transitionTime)}}}},I={inserted:function(t,e){t.style.transition="opacity "+T.transitionTime+"ms",t.style.opacity=1,T.loading&&(t.style.backgroundImage="url("+T.loading+")"),t.key="key_"+Math.random().toString(36).substr(2,6),E(t,e.value),T.add(t),T.isElementInViewport(t)&&t.execute()},update:function(t,e){e.oldValue!==e.value&&(t.dataset.success="",E(t,e.value),T.isElementInViewport(t)&&t.execute())},unbind:function(t){T.remove(t.key)}},O={install:function(t,e){"object"==typeof e&&(e.loading&&(T.loading=e.loading),e.failed&&(T.failed=e.failed)),new Image(T.loading),new Image(T.failed),t.directive("lazyload",I)}};return O});
//# sourceMappingURL=vue-lazyload-directive.min.js.map
